# <div align="center">GlucoTwin – Gestational Diabetes Monitoring Platform</div>

A comprehensive digital health application for monitoring and predicting gestational diabetes mellitus (GDM) using machine learning, built with Next.js and Flask, designed for integration with Clerk authentication and Neon database.

### Senior Graduation Project – University of Sharjah  
**Contributors:**  
- Abdulla Sayed – U22103623  
- Abdulrahman Mahdi – U2200186  
- Ashraf Bin Adam – U22104510  
- Omar Farouq – U22100742  

![University Logo Placeholder](insert-your-university-logo.png)

---

## Built with the tools and technologies:

![Flask](https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=flask&logoColor=white) ![JSON](https://img.shields.io/badge/JSON-000000?style=for-the-badge&logo=json&logoColor=white) ![Markdown](https://img.shields.io/badge/Markdown-000000?style=for-the-badge&logo=markdown&logoColor=white) ![npm](https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white) ![scikit-learn](https://img.shields.io/badge/scikit--learn-F7931E?style=for-the-badge&logo=scikit-learn&logoColor=white) ![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black) ![Gunicorn](https://img.shields.io/badge/Gunicorn-499848?style=for-the-badge&logo=gunicorn&logoColor=white) ![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB) ![NumPy](https://img.shields.io/badge/NumPy-013243?style=for-the-badge&logo=numpy&logoColor=white) ![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white) ![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white) ![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white) ![Prisma](https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white) ![pandas](https://img.shields.io/badge/pandas-150458?style=for-the-badge&logo=pandas&logoColor=white) ![datefns](https://img.shields.io/badge/date--fns-770C56?style=for-the-badge&logo=date-fns&logoColor=white) ![YAML](https://img.shields.io/badge/YAML-CB171E?style=for-the-badge&logo=yaml&logoColor=white)

---

## Dataset used

- **GDM-Final 2022 (Kaggle)** – 3,525 samples × 17 columns  
- **EHR GDM Dataset (GitHub)** – 23,490 samples × 48 columns  

These datasets include clinical parameters such as glucose levels, insulin response, maternal weight, pregnancy history, and blood pressure.

---

## Features

### Patient Features
- Record health readings (glucose, insulin use, blood pressure, BMI, etc.)  
- Receive notifications and alerts when dangerous values are entered  
- View prediction results generated by the ML model  
- Message doctors securely and receive healthcare advice  
- Track medical history and progress over time  

### Doctor Features
- Dashboard with a list of assigned patients  
- Receive danger alerts whenever a patient records abnormal readings  
- Access patient histories and prediction results  
- Provide recommendations through messaging system  
- Monitor multiple patients simultaneously  

![Patient Dashboard Placeholder](insert-patient-dashboard-screenshot.png)  
![Doctor Dashboard Placeholder](insert-doctor-dashboard-screenshot.png)

---

## Tech Stack

- **Frontend**: Next.js 14, React 18, TypeScript  
- **Styling**: Tailwind CSS, Shadcn/ui components, Radix UI  
- **Backend**: Flask API (Python, scikit-learn, pandas, NumPy)  
- **Database**: Neon.tech (Postgres) + Prisma ORM  
- **Authentication**: Clerk  
- **Icons**: Lucide React  
- **Deployment**:  
  - Next.js app on Vercel (`gluco-twin.vercel.app`)  
  - Flask API on Render (Dockerized)  

```typescript
// call Flask API endpoint for prediction
const flaskResponse = await fetch(`${process.env.FLASK_BASE_URL}/predict`, {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({ patientData }),
})
const predictionResult = await flaskResponse.json()
```

## Project Structure

```
GlucoTwin/
├── app/
│   ├── (auth)/
│   │   ├── sign-in/
│   │   └── sign-up/
│   ├── doctor/
│   │   ├── dashboard/
│   │   ├── messages/
│   │   ├── patients/
│   │   └── profile/
│   ├── onboarding/
│   ├── patient/
│   │   ├── _components/
│   │   ├── dashboard/
│   │   ├── messages/
│   │   ├── profile/
│   │   ├── readings/
│   │   │   ├── edit/
│   │   │   └── new/
│   │   └── utils/
│   ├── globals.css
│   ├── layout.tsx
│   └── page.tsx
├── components/
├── hooks/
├── lib/
├── prisma/
├── public/
├── python-scripts/
├── styles/
├── app.py
├── components.json
├── Dockerfile
└── middleware.ts
```

## Getting Started

### 1. Install Dependencies

```bash
npm install
```

### 2. Database Setup

```bash
npx prisma generate
npx prisma db push
```

### 3. Environment Variables

Create a `.env` file:

```env
DATABASE_URL=your_neon_database_url
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key
FLASK_BASE_URL=your_flask_url
```

### 4. Run the Application

Start the Next.js frontend:

```bash
npm run dev
```

Start the Flask backend:

```bash
python3 app.py
```

## Patient Medical Parameters

The application handles medical parameters relevant to gestational diabetes prediction:

- Glucose levels
- Blood pressure
- BMI (Body Mass Index)
- Insulin levels
- Age
- Pregnancy term and due date
- Number of pregnancies
- Maternal weight and clinical history

## Integration Roadmap

### Clerk Authentication
1. Install Clerk packages
2. Configure Clerk providers
3. Add environment variable keys

### Neon Database
1. Set up Neon project
2. Configure database connection

### ML Model Integration
1. Train ML model with GDM dataset
2. Save model artifacts (pickle/joblib)
3. Update Flask API with real model
4. Implement feature preprocessing

## API Endpoints

### Next.js API Routes
- `POST /api/predict` – Proxy to Flask API for predictions

### Flask API Endpoints
- `POST /predict` – Generate prediction
- `GET /health` – Health check
- `GET /model/status` – Returns model load status and version
- `GET /get` – Retrieve stored data

Example request:

```json
{
  "glucose": 135,
  "blood_pressure": 82,
  "bmi": 30.1,
  "insulin": 90,
  "age": 28,
  "pregnancies": 2
}
```

Example response:

```json
{
  "prediction": "High Risk",
  "confidence": 0.87
}
```

## Database Schema

The application uses PostgreSQL with Prisma ORM to store:

- Patients
- Doctors
- Clinical information
- Prediction sessions
- Notifications
- Messaging logs

## Dockerization

The Flask backend is fully containerized using Docker:

```bash
docker build -t glucotwin-backend .
docker run -p 5000:5000 glucotwin-backend
```

This ensures consistent deployment with Gunicorn in production and portability across environments.

## Deployment

### Vercel Deployment
1. Push repo to GitHub
2. Connect to Vercel
3. Configure environment variables
4. Deploy

### Flask API Deployment
- The API server is deployed on Render using Docker.

## Acknowledgements

This project was developed as part of the University of Sharjah Senior Graduation Project.
Special thanks to our supervisors, mentors, and colleagues for their guidance.
